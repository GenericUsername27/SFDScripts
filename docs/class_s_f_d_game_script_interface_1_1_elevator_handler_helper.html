<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Superfighters Deluxe: ElevatorHandlerHelper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="SFDLogoAPI.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Superfighters Deluxe
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ElevatorHandlerHelper Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Helper class to handle a single elevator instance with objects named with elevator prefix and floor suffix in the following pattern:<br  />
 {elePrefix}_BtnUp - Button to make the elevator go up one floor.<br  />
 {elePrefix}_BtnDown - Button to make the elevator go down one floor.<br  />
 {elePrefix}_BtnFloor_{floorLetter} - Button to make the elevator go to the destinated PathJoint with the same floorLetter.<br  />
 {elePrefix}_PathJoint_{floorLetter} - PathJoint per floor.<br  />
 {elePrefix}_EleJoint - Elevator attachment joint.<br  />
 {elePrefix}_PathCon_{floorLetter} - PathNodeConnection per floor.<br  />
<br  />
 
 <a href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1bfe402e880b30646214c854cafef7e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a1bfe402e880b30646214c854cafef7e7">ElevatorHandlerHelper</a> (<a class="el" href="class_s_f_d_game_script_interface_1_1_i_game.html">IGame</a> game, string elevatorPrefix, string[] elevatorFloorLetters, string startingFloorLetter)</td></tr>
<tr class="memdesc:a1bfe402e880b30646214c854cafef7e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper class to handle a single elevator instance with objects named with elevator prefix and floor suffix in the following pattern:<br  />
<br  />
 <a href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a1bfe402e880b30646214c854cafef7e7">More...</a><br /></td></tr>
<tr class="separator:a1bfe402e880b30646214c854cafef7e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabd8398f8b3fcfe8e2e06c8c7c8d1ffc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#aabd8398f8b3fcfe8e2e06c8c7c8d1ffc">ButtonPressed</a> (string btnPressedID)</td></tr>
<tr class="memdesc:aabd8398f8b3fcfe8e2e06c8c7c8d1ffc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle elevator button pressed  <a href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#aabd8398f8b3fcfe8e2e06c8c7c8d1ffc">More...</a><br /></td></tr>
<tr class="separator:aabd8398f8b3fcfe8e2e06c8c7c8d1ffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42bd8248efb7e164e7350e72ea208af6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a42bd8248efb7e164e7350e72ea208af6">ElevatorArrived</a> (string floorPathJointID)</td></tr>
<tr class="memdesc:a42bd8248efb7e164e7350e72ea208af6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will enable and disable correct buttons based on which floor the elevator arrived at  <a href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a42bd8248efb7e164e7350e72ea208af6">More...</a><br /></td></tr>
<tr class="separator:a42bd8248efb7e164e7350e72ea208af6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a98254522b913ca03a4c7fdde6dc0669a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a98254522b913ca03a4c7fdde6dc0669a">HandleElevatorArrived</a> (<a class="el" href="class_s_f_d_game_script_interface_1_1_trigger_args.html">TriggerArgs</a> args)</td></tr>
<tr class="memdesc:a98254522b913ca03a4c7fdde6dc0669a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper to handle multiple elevator instances when an elevator has arrived at its destination.  <a href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a98254522b913ca03a4c7fdde6dc0669a">More...</a><br /></td></tr>
<tr class="separator:a98254522b913ca03a4c7fdde6dc0669a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1baaa3b4c089c14575fcf5522875e1bb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a1baaa3b4c089c14575fcf5522875e1bb">HandleElevatorButtonPress</a> (<a class="el" href="class_s_f_d_game_script_interface_1_1_trigger_args.html">TriggerArgs</a> args)</td></tr>
<tr class="memdesc:a1baaa3b4c089c14575fcf5522875e1bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper to handle multiple elevator instances when you press a button connected to an elevator.  <a href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a1baaa3b4c089c14575fcf5522875e1bb">More...</a><br /></td></tr>
<tr class="separator:a1baaa3b4c089c14575fcf5522875e1bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98977243410126d07c23d1c4aa6d4a47"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html">ElevatorHandlerHelper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a98977243410126d07c23d1c4aa6d4a47">Register</a> (<a class="el" href="class_s_f_d_game_script_interface_1_1_i_game.html">IGame</a> game, string elevatorPrefix, string[] elevatorFloorLetters, string startingFloorLetter)</td></tr>
<tr class="memdesc:a98977243410126d07c23d1c4aa6d4a47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper to handle multiple elevator instances with objects named with elevator prefix and floor suffix in the following pattern:<br  />
<br  />
 <a href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a98977243410126d07c23d1c4aa6d4a47">More...</a><br /></td></tr>
<tr class="separator:a98977243410126d07c23d1c4aa6d4a47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1158dccc41befe4e393ca62003ada443"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a1158dccc41befe4e393ca62003ada443">Unregister</a> (<a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html">ElevatorHandlerHelper</a> elevatorHandlerHelper)</td></tr>
<tr class="memdesc:a1158dccc41befe4e393ca62003ada443"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregisteres a registered elevator.  <a href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html#a1158dccc41befe4e393ca62003ada443">More...</a><br /></td></tr>
<tr class="separator:a1158dccc41befe4e393ca62003ada443"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Helper class to handle a single elevator instance with objects named with elevator prefix and floor suffix in the following pattern:<br  />
 {elePrefix}_BtnUp - Button to make the elevator go up one floor.<br  />
 {elePrefix}_BtnDown - Button to make the elevator go down one floor.<br  />
 {elePrefix}_BtnFloor_{floorLetter} - Button to make the elevator go to the destinated PathJoint with the same floorLetter.<br  />
 {elePrefix}_PathJoint_{floorLetter} - PathJoint per floor.<br  />
 {elePrefix}_EleJoint - Elevator attachment joint.<br  />
 {elePrefix}_PathCon_{floorLetter} - PathNodeConnection per floor.<br  />
<br  />
</p>
<p>This helper class was based on the following SFD Script code and can be modified if you like for your own script:<br  />
 See official maps for examples how to use this helper class. </p><pre class="fragment">*/
/*
 public class ElevatorHandlerHelper
 {
    private class ElevatorFloor
    {
        public IObjectTrigger[] FloorButtons = null;
        public IObjectElevatorPathJoint ElevatorPathJoint = null;
        public string FloorLetter = "";
        public IObjectPathNodeConnection[] PathNodeConnections = null;
        public int FloorIndex;
    }

    private IGame Game;
    private IObjectElevatorAttachmentJoint ElevatorAttachmentJoint = null;
    private IObjectTrigger ElevatorButtonUp = null;
    private IObjectTrigger ElevatorButtonDown = null;
    private string ElevatorCurrentFloorLetter = "";
    private float ElevatorMotorSpeed = 0f;

    // Index 0 is bottom floor, 1 is second floor and so on...
    private List&lt;ElevatorFloor&gt; ElevatorFloors = null;

    /// &lt;param name="elevatorPrefix"&gt;Prefix for the elevator&lt;/param&gt;
    /// &lt;param name="elevatorFloorLetters"&gt;Floors starting from bottom to top in order&lt;/param&gt;
    /// &lt;param name="startingFloorLetter"&gt;Starting floor the elevator attachment joint spawns at&lt;/param&gt;
    public ElevatorHandlerHelper(IGame game, string elevatorPrefix, string[] elevatorFloorLetters, string startingFloorLetter)
    {

        // prepare data
        this.Game = game;
        this.ElevatorFloors = new List&lt;ElevatorFloor&gt;();

        // fetch objects
        if (elevatorFloorLetters != null)
        {
            foreach (string floorLetter in elevatorFloorLetters)
            {
                ElevatorFloor floor = new ElevatorFloor();
                floor.FloorLetter = floorLetter;
                floor.FloorButtons = Game.GetObjectsByCustomID&lt;IObjectTrigger&gt;(string.Format("{0}_BtnFloor_{1}", elevatorPrefix, floorLetter));
                floor.ElevatorPathJoint = Game.GetSingleObjectByCustomID&lt;IObjectElevatorPathJoint&gt;(string.Format("{0}_PathJoint_{1}", elevatorPrefix, floorLetter));
                floor.PathNodeConnections = Game.GetObjectsByCustomID&lt;IObjectPathNodeConnection&gt;(string.Format("{0}_PathCon_{1}", elevatorPrefix, floorLetter));
                floor.FloorIndex = this.ElevatorFloors.Count;
                this.ElevatorFloors.Add(floor);
            }
        }

        // should only be one elevatorAttachmentJoint
        IObject[] elevatorAttachmentJoint = Game.GetObjectsByCustomID(string.Format("{0}_EleJoint", elevatorPrefix));
        if ((elevatorAttachmentJoint.Length == 1) &amp;&amp; (elevatorAttachmentJoint[0] is IObjectElevatorAttachmentJoint))
        {
            this.ElevatorAttachmentJoint = (IObjectElevatorAttachmentJoint)elevatorAttachmentJoint[0];
            this.ElevatorMotorSpeed = ElevatorAttachmentJoint.GetMotorSpeed(); // store motorspeed set in the editor
        }
        else
        {
            Game.WriteToConsole(string.Format("Can't find ElevatorAttachmentJoint '{0}_EleJoint'", elevatorPrefix));
        }

        //{elePrefix}_BtnUp
        //{elePrefix}_BtnDown
        this.ElevatorButtonUp = Game.GetSingleObjectByCustomID&lt;IObjectTrigger&gt;(string.Format("{0}_BtnUp", elevatorPrefix));
        this.ElevatorButtonDown = Game.GetSingleObjectByCustomID&lt;IObjectTrigger&gt;(string.Format("{0}_BtnDown", elevatorPrefix));

        // start with negative speed to make elevator reset itself to its starting position
        if ((this.ElevatorAttachmentJoint != null) &amp;&amp; (this.ElevatorAttachmentJoint.GetMotorSpeed() &gt; 0f))
        {
            this.ElevatorAttachmentJoint.SetMotorSpeed(-this.ElevatorAttachmentJoint.GetMotorSpeed());
        }

        Game.WriteToConsole("Elevator Initialized");
    }

    public void ButtonPressed(string btnPressedID)
    {
        if (this.ElevatorAttachmentJoint != null)
        {
            ElevatorFloor destinationElevatorFloor = GetElevatorDestinationFloorByButtonID(btnPressedID);
            if (destinationElevatorFloor != null)
            {
                // Check that the button pressed belong to another floor. In that case move the elevator to that floor and disable buttons.
                if (this.ElevatorCurrentFloorLetter != destinationElevatorFloor.FloorLetter)
                {
                    if (destinationElevatorFloor.ElevatorPathJoint != null) // failsafe
                    {
                        ElevatorFloor currentElevatorFloor = GetElevatorFloorByFloorLetter(this.ElevatorCurrentFloorLetter);
                        if (currentElevatorFloor != null) // failsafe
                        {
                            if ((currentElevatorFloor.ElevatorPathJoint != null) &amp;&amp; (destinationElevatorFloor.ElevatorPathJoint != null)) // failsafe
                            {
                                // Clear destination's next PathJoint so the elevator will stop there and not automatically continue it's path
                                for (int i = 0; i &lt; ElevatorFloors.Count; i++)
                                {
                                    if (ElevatorFloors[i].ElevatorPathJoint != null)
                                    {
                                        ElevatorFloors[i].ElevatorPathJoint.SetNextPathJoint(null);
                                    }
                                }
                                // Set up path-joints connection
                                currentElevatorFloor.ElevatorPathJoint.SetNextPathJoint(destinationElevatorFloor.ElevatorPathJoint);
                                // Re-initialize elevatorAttachmentJoint
                                this.ElevatorAttachmentJoint.SetElevatorPathJoint(currentElevatorFloor.ElevatorPathJoint);
                                this.ElevatorAttachmentJoint.SetMotorSpeed(this.ElevatorMotorSpeed);
                                // Disable buttons
                                ButtonsSetEnabled(false);
                                // Reconfigure PathConnections
                                PathNodeConnectionEnableForFloor(destinationElevatorFloor);
                            }
                        }
                    }
                }
            }
        }
    }

    public void ElevatorArrived(string floorPathJointID)
    {
        if (this.ElevatorAttachmentJoint != null)
        {
            ElevatorFloor elevatorFloor = GetElevatorFloorByPathJointID(floorPathJointID);
            if (elevatorFloor != null)
            {
                this.ElevatorCurrentFloorLetter = elevatorFloor.FloorLetter;
                // Play sound
                Game.PlaySound("ElevatorDing", ElevatorAttachmentJoint.GetWorldPosition(), 1f);
                // Enable buttons
                ButtonsSetEnabled(true);
                // Reconfigure PathConnections
                PathNodeConnectionEnableForFloor(elevatorFloor);
            }
            else
            {
                Game.WriteToConsole(string.Format("ElevatorArrived ({0}) - PathJointNotFound", floorPathJointID));
            }
        }
    }

    private void ButtonsSetEnabled(bool value)
    {
        // Enable buttons
        for (int i = 0; i &lt; this.ElevatorFloors.Count; i++)
        {
            ElevatorFloor floor = this.ElevatorFloors[i];
            if (floor.FloorButtons != null)
            {
                for (int j = 0; j &lt; floor.FloorButtons.Length; j++)
                {
                    floor.FloorButtons[j].SetEnabled(value);
                }
            }
        }
        if (this.ElevatorButtonUp != null)
        {
            this.ElevatorButtonUp.SetEnabled(value);
        }
        if (this.ElevatorButtonDown != null)
        {
            this.ElevatorButtonDown.SetEnabled(value);
        }
    }

    // Sets current PathNodeConnections to be enabled to the specified floor while disabling all others.
    private void PathNodeConnectionEnableForFloor(ElevatorFloor activeFloor)
    {
        if (activeFloor == null)
        {
            return;
        }
        for (int i = 0; i &lt; this.ElevatorFloors.Count; i++)
        {
            ElevatorFloor floor = this.ElevatorFloors[i];
            bool enabled = (activeFloor.FloorIndex == floor.FloorIndex);
            if (floor.PathNodeConnections != null)
            {
                // Up/Down buttons always valid activators (if it's the right direction!)
                // Each floor's call buttons are also valid activators.
                // Destination floor has connection enabled!
                List&lt;IObjectActivateTrigger&gt; enableWithActivators = new List&lt;IObjectActivateTrigger&gt;();
                if (floor.FloorButtons != null)
                {
                    foreach (IObjectTrigger trigger in floor.FloorButtons)
                    {
                        if (trigger is IObjectActivateTrigger)
                        {
                            enableWithActivators.Add((IObjectActivateTrigger)trigger);
                        }
                    }
                }
                if (floor.FloorIndex &lt; activeFloor.FloorIndex &amp;&amp; this.ElevatorButtonDown != null &amp;&amp; this.ElevatorButtonDown is IObjectActivateTrigger)
                {
                    enableWithActivators.Add((IObjectActivateTrigger)this.ElevatorButtonDown);
                }
                else if (floor.FloorIndex &gt; activeFloor.FloorIndex &amp;&amp; this.ElevatorButtonUp != null &amp;&amp; this.ElevatorButtonUp is IObjectActivateTrigger)
                {
                    enableWithActivators.Add((IObjectActivateTrigger)this.ElevatorButtonUp);
                }
                for (int j = 0; j &lt; floor.PathNodeConnections.Length; j++)
                {
                    floor.PathNodeConnections[j].SetConnectionEnabled(enabled);
                    floor.PathNodeConnections[j].SetEnableWithActivatorObjects(enableWithActivators);
                }
            }
        }
    }

    // Helper method to find ElevatorFloor by PathJoinCustomID
    private ElevatorFloor GetElevatorFloorByPathJointID(string floorPathJointID)
    {
        for (int i = 0; i &lt; this.ElevatorFloors.Count; i++)
        {
            ElevatorFloor floor = this.ElevatorFloors[i];
            if ((floor.ElevatorPathJoint != null) &amp;&amp; (floor.ElevatorPathJoint.CustomID == floorPathJointID))
            {
                return floor;
            }
        }
        return null;
    }

    // Helper method to find destination ElevatorFloor based on button pressed.
    private ElevatorFloor GetElevatorDestinationFloorByButtonID(string buttonID)
    {
        for (int i = 0; i &lt; this.ElevatorFloors.Count; i++)
        {
            ElevatorFloor floor = this.ElevatorFloors[i];
            if (floor.FloorButtons != null)
            {
                for (int j = 0; j &lt; floor.FloorButtons.Length; j++)
                {
                    if (floor.FloorButtons[j].CustomID == buttonID)
                    {
                        return floor;
                    }
                }
            }
        }
        // Check if buttonUp or buttonDown has been pressed aswell and find out the next ElevatorFloor based on that
        if ((this.ElevatorButtonDown != null) &amp;&amp; (this.ElevatorButtonDown.CustomID == buttonID))
        {
            // Floors starting from bottom to top in order
            for (int i = 1; i &lt; this.ElevatorFloors.Count; i++)
            {
                if (this.ElevatorFloors[i].FloorLetter == this.ElevatorCurrentFloorLetter)
                {
                    return this.ElevatorFloors[i - 1];
                }
            }
        }
        if ((this.ElevatorButtonUp != null) &amp;&amp; (this.ElevatorButtonUp.CustomID == buttonID))
        {
            // Floors starting from bottom to top in order
            for (int i = 0; i &lt; this.ElevatorFloors.Count - 1; i++)
            {
                if (this.ElevatorFloors[i].FloorLetter == this.ElevatorCurrentFloorLetter)
                {
                    return this.ElevatorFloors[i + 1];
                }
            }
        }

        return null;
    }

    // Helper method to find ElevatorFloor based on floor letter
    private ElevatorFloor GetElevatorFloorByFloorLetter(string floorLetter)
    {
        for (int i = 0; i &lt; this.ElevatorFloors.Count; i++)
        {
            if (this.ElevatorFloors[i].FloorLetter == floorLetter)
            {
                return this.ElevatorFloors[i];
            }
        }
        return null;
    }

    private static List&lt;ElevatorHandlerHelper&gt; m_elevatorHandlerHelpers = null;
    
    // &lt;param name="elevatorPrefix"&gt;Prefix for the elevator&lt;/param&gt;
    // &lt;param name="elevatorFloorLetters"&gt;Floors starting from bottom to top in order&lt;/param&gt;
    // &lt;param name="startingFloorLetter"&gt;Starting floor the elevator attachment joint spawns at&lt;/param&gt;
    public static ElevatorHandlerHelper Register(IGame game, string elevatorPrefix, string[] elevatorFloorLetters, string startingFloorLetter)
    {
        if (m_elevatorHandlerHelpers == null)
        {
            m_elevatorHandlerHelpers = new List&lt;ElevatorHandlerHelper&gt;();
        }
        ElevatorHandlerHelper helper = new ElevatorHandlerHelper(game, elevatorPrefix, elevatorFloorLetters, startingFloorLetter);
        m_elevatorHandlerHelpers.Add(helper);
        return helper;
    }

    // Unregisteres a registered elevator.
    public static void Unregister(ElevatorHandlerHelper elevatorHandlerHelper)
    {
        if (m_elevatorHandlerHelpers != null)
        {
            m_elevatorHandlerHelpers.Remove(elevatorHandlerHelper);
            if (m_elevatorHandlerHelpers.Count == 0)
            {
                m_elevatorHandlerHelpers = null;
            }
        }
    }

    // Helper to handle multiple elevator instances when you press a button connected to an elevator.
    // &lt;param name="args"&gt;TriggerArgs from the button press event&lt;/param&gt;
    public static void HandleElevatorButtonPress(TriggerArgs args)
    {
        if (m_elevatorHandlerHelpers != null)
        {
            // Find out which button was pressed
            if ((args.Caller != null) &amp;&amp; (args.Caller is IObject))
            {
                IObject btnPressed = (IObject)args.Caller;
                foreach (ElevatorHandlerHelper elevator in m_elevatorHandlerHelpers)
                {
                    elevator.ButtonPressed(btnPressed.CustomId);
                }
            }
        }
    }

    // Helper to handle multiple elevator instances when an elevator has arrived at its destination.
    // &lt;param name="args"&gt;TriggerArgs from the event&lt;/param&gt;
    public static void HandleElevatorArrived(TriggerArgs args)
    {
        if (m_elevatorHandlerHelpers != null)
        {
            // args.Caller is the elevatorAttachmentJoint, args.Sender is the elevatorPathJoint arrived at in this case
            if ((args.Sender != null) &amp;&amp; (args.Sender is IObject))
            {
                IObject pathJoint = (IObject)args.Sender;
                foreach (ElevatorHandlerHelper elevator in m_elevatorHandlerHelpers)
                {
                    elevator.ElevatorArrived(pathJoint.CustomId);
                }
            }
        }
    }

}
*/
/**</pre></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1bfe402e880b30646214c854cafef7e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bfe402e880b30646214c854cafef7e7">&#9670;&nbsp;</a></span>ElevatorHandlerHelper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html">ElevatorHandlerHelper</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_f_d_game_script_interface_1_1_i_game.html">IGame</a>&#160;</td>
          <td class="paramname"><em>game</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>elevatorPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string[]&#160;</td>
          <td class="paramname"><em>elevatorFloorLetters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>startingFloorLetter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper class to handle a single elevator instance with objects named with elevator prefix and floor suffix in the following pattern:<br  />
<br  />
</p>
<p>{elePrefix}_BtnUp - Button to make the elevator go up one floor.<br  />
{elePrefix}_BtnDown - Button to make the elevator go down one floor.<br  />
{elePrefix}_BtnFloor_{floorLetter} - Button to make the elevator go to the destinated PathJoint with the same floorLetter.<br  />
{elePrefix}_PathJoint_{floorLetter} - PathJoint per floor.<br  />
{elePrefix}_EleJoint - Elevator attachment joint.<br  />
{elePrefix}_PathCon_{floorLetter} - PathNodeConnection per floor.<br  />
 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">game</td><td></td></tr>
    <tr><td class="paramname">elevatorPrefix</td><td>Prefix for the elevator</td></tr>
    <tr><td class="paramname">elevatorFloorLetters</td><td>Floors starting from bottom to top in order</td></tr>
    <tr><td class="paramname">startingFloorLetter</td><td>Starting floor the elevator attachment joint spawns at</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aabd8398f8b3fcfe8e2e06c8c7c8d1ffc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabd8398f8b3fcfe8e2e06c8c7c8d1ffc">&#9670;&nbsp;</a></span>ButtonPressed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ButtonPressed </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>btnPressedID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle elevator button pressed </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">btnPressedID</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a42bd8248efb7e164e7350e72ea208af6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42bd8248efb7e164e7350e72ea208af6">&#9670;&nbsp;</a></span>ElevatorArrived()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ElevatorArrived </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>floorPathJointID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will enable and disable correct buttons based on which floor the elevator arrived at </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">floorPathJointID</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a98254522b913ca03a4c7fdde6dc0669a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98254522b913ca03a4c7fdde6dc0669a">&#9670;&nbsp;</a></span>HandleElevatorArrived()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HandleElevatorArrived </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_f_d_game_script_interface_1_1_trigger_args.html">TriggerArgs</a>&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper to handle multiple elevator instances when an elevator has arrived at its destination. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td><a class="el" href="class_s_f_d_game_script_interface_1_1_trigger_args.html" title="Function trigger arguments">TriggerArgs</a> from the event</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1baaa3b4c089c14575fcf5522875e1bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1baaa3b4c089c14575fcf5522875e1bb">&#9670;&nbsp;</a></span>HandleElevatorButtonPress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HandleElevatorButtonPress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_f_d_game_script_interface_1_1_trigger_args.html">TriggerArgs</a>&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper to handle multiple elevator instances when you press a button connected to an elevator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td><a class="el" href="class_s_f_d_game_script_interface_1_1_trigger_args.html" title="Function trigger arguments">TriggerArgs</a> from the button press event</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a98977243410126d07c23d1c4aa6d4a47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98977243410126d07c23d1c4aa6d4a47">&#9670;&nbsp;</a></span>Register()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html">ElevatorHandlerHelper</a> Register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_f_d_game_script_interface_1_1_i_game.html">IGame</a>&#160;</td>
          <td class="paramname"><em>game</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>elevatorPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string[]&#160;</td>
          <td class="paramname"><em>elevatorFloorLetters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>startingFloorLetter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper to handle multiple elevator instances with objects named with elevator prefix and floor suffix in the following pattern:<br  />
<br  />
</p>
<p>{elePrefix}_BtnUp - Button to make the elevator go up one floor.<br  />
{elePrefix}_BtnDown - Button to make the elevator go down one floor.<br  />
{elePrefix}_BtnFloor_{floorLetter} - Button to make the elevator go to the destinated PathJoint with the same floorLetter.<br  />
{elePrefix}_PathJoint_{floorLetter} - PathJoint per floor.<br  />
{elePrefix}_EleJoint - Elevator attachment joint.<br  />
 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elevatorPrefix</td><td>Prefix for the elevator</td></tr>
    <tr><td class="paramname">elevatorFloorLetters</td><td>Floors starting from bottom to top in order</td></tr>
    <tr><td class="paramname">startingFloorLetter</td><td>Starting floor the elevator attachment joint spawns at</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1158dccc41befe4e393ca62003ada443"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1158dccc41befe4e393ca62003ada443">&#9670;&nbsp;</a></span>Unregister()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void Unregister </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html">ElevatorHandlerHelper</a>&#160;</td>
          <td class="paramname"><em>elevatorHandlerHelper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unregisteres a registered elevator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elevatorHandlerHelper</td><td><a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html" title="Helper class to handle a single elevator instance with objects named with elevator prefix and floor s...">ElevatorHandlerHelper</a> to unregister</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_s_f_d_game_script_interface.html">SFDGameScriptInterface</a></li><li class="navelem"><a class="el" href="class_s_f_d_game_script_interface_1_1_elevator_handler_helper.html">ElevatorHandlerHelper</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
